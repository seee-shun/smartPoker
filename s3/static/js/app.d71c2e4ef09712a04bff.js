webpackJsonp([0],{FhjP:function(t,s){},LfPm:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("Xrl+"),e("fLmE");var i=e("7+uW"),h=e("EOUi"),n=e.n(h),a=e("rifk"),l=e.n(a),r=e("NYxO");i.a.use(r.a);var p=new r.a.Store({modules:{navigator:{strict:!0,namespaced:!0,state:{stack:[],player:[],maxRound:"",chip:"",minBet:"",ranking:[]},mutations:{push:function(t,s){t.stack.push(s)},pop:function(t){t.stack.length>1&&t.stack.pop()}}}}}),o=e("r6OD"),c={beforeCreate:function(){this.$store.commit("navigator/push",o.a)},data:function(){return{}},computed:{pageStack:function(){return this.$store.state.navigator.stack}}},y={render:function(){var t=this.$createElement;return(this._self._c||t)("v-ons-navigator",{attrs:{swipeable:"","swipe-target-width":"5%",id:"navigator","page-stack":this.pageStack,var:"navigator"}})},staticRenderFns:[]},u=e("VU/8")(c,y,!1,null,null,null).exports;i.a.config.productionTip=!1,i.a.prototype.$url="https://a1gf8dsmmf.execute-api.ap-northeast-1.amazonaws.com/dev",i.a.use(n.a),i.a.use(l.a),new i.a({el:"#app",store:p,template:"<App/>",components:{App:u}})},RVkA:function(t,s,e){"use strict";var i=e("r6OD"),h=(e("yjVU"),{data:function(){return{ranking:this.$store.state.ranking}},created:function(){},methods:{submit:function(){this.$store.commit("navigator/push",i.a)}}}),n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-ons-page",[e("v-ons-card",[e("div",[e("h1",{staticClass:"neon"},[t._v("WINNER:"+t._s(t.ranking[0].name))]),t._v(" "),t._l(t.ranking,function(s,i){return e("ul",{key:i,staticClass:"ranking"},[e("ol",[t._v(t._s(i+1)+"位:"+t._s(s.name))])])})],2)]),t._v(" "),e("div",[e("ons-button",{attrs:{type:"submit"},on:{click:function(s){return t.submit()}}},[t._v("\n    もう一度\n  ")])],1)],1)},staticRenderFns:[]};var a=e("VU/8")(h,n,!1,function(t){e("lv8F")},"data-v-73b4149f",null);s.a=a.exports},W5P0:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__page2_vue__=__webpack_require__("yjVU"),__WEBPACK_IMPORTED_MODULE_1__page3_vue__=__webpack_require__("RVkA");__webpack_exports__.a={data:function(){return{groupID:null,names:[],player:[],maxRound:4,chip:500,minBet:10,players:[],isAllSelected:!1,record:{}}},created:function(){this.fetch()},watch:{player:function(){this.maxRound=this.player.length}},methods:{submit:function(){this.$store.state.player=this.player,this.$store.state.maxRound=Number(this.maxRound),this.$store.state.chip=Number(this.chip),this.$store.state.minBet=Number(this.minBet),this.$store.commit("navigator/push",__WEBPACK_IMPORTED_MODULE_0__page2_vue__.a)},selectAll:function(){if(this.isAllSelected)this.player=[],this.isAllSelected=!1;else{for(var t in this.player=[],this.names)this.player.push(this.names[t]);this.isAllSelected=!0}},fetch:function(t){function s(){return t.apply(this,arguments)}return s.toString=function(){return t.toString()},s}(function(){var _this=this;fetch(this.$url+"/record?recordID="+localStorage.getItem("recordID"),{method:"GET"}).then(function(t){return t.json()}).then(function(data){for(var i=0;i<8;i++){var j=eval("data.record.name"+i+".value");if("null"!=j&&""!=j){var addPlayer=j;_this.names.push(addPlayer)}}_this.selectAll(),_this.groupID=data.record.groupId.value}).catch(function(t){console.error(t)})})}}},"Xrl+":function(t,s){},fLmE:function(t,s){},lv8F:function(t,s){},r6OD:function(t,s,e){"use strict";var i=e("W5P0"),h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-ons-page",[e("ons-card",[e("div",{attrs:{align:"center"}},[e("h1",[t._v("Smart Poker")]),t._v(" "),e("h2",[t._v("グループID:"+t._s(t.groupID))]),t._v(" "),e("div",[e("h2",[t._v("ゲーム設定")]),t._v(" "),e("form",{on:{submit:function(s){return s.preventDefault(),t.submit(s)}}},[e("label",[t._v("プレイヤー")]),t._v(" "),e("label",[e("input",{attrs:{type:"checkbox"},domProps:{checked:t.isAllSelected},on:{click:t.selectAll}}),t._v("ALL")]),t._v(" "),t._l(t.names,function(s,i){return e("div",{key:i},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.player,expression:"player"}],attrs:{id:"name"+i,type:"checkbox"},domProps:{value:s,checked:Array.isArray(t.player)?t._i(t.player,s)>-1:t.player},on:{change:function(e){var i=t.player,h=e.target,n=!!h.checked;if(Array.isArray(i)){var a=s,l=t._i(i,a);h.checked?l<0&&(t.player=i.concat([a])):l>-1&&(t.player=i.slice(0,l).concat(i.slice(l+1)))}else t.player=n}}}),t._v(" "),e("label",{attrs:{for:"player"+i}},[t._v(t._s(s))])])}),e("br"),t._v(" "),e("div",[e("label",{attrs:{for:"maxRound"}},[t._v("ラウンド")]),e("br"),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.maxRound,expression:"maxRound"}],attrs:{type:"number"},domProps:{value:t.maxRound},on:{input:function(s){s.target.composing||(t.maxRound=s.target.value)}}})]),e("br"),t._v(" "),e("div",[e("label",{attrs:{for:"chip"}},[t._v("チップ")]),e("br"),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.chip,expression:"chip"}],attrs:{type:"number"},domProps:{value:t.chip},on:{input:function(s){s.target.composing||(t.chip=s.target.value)}}})]),e("br"),t._v(" "),e("div",[e("label",{attrs:{for:"minbet"}},[t._v("最低ベット")]),e("br"),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.minBet,expression:"minBet"}],attrs:{type:"number"},domProps:{value:t.minBet},on:{input:function(s){s.target.composing||(t.minBet=s.target.value)}}})]),e("br"),t._v(" "),e("div",[e("ons-button",{attrs:{type:"submit"},on:{click:function(s){return t.submit()}}},[t._v("ゲームスタート")])],1)],2)])])])],1)},staticRenderFns:[]};var n=function(t){e("LfPm")},a=e("VU/8")(i.a,h,!1,n,"data-v-219e63c1",null);s.a=a.exports},yjVU:function(t,s,e){"use strict";e("r6OD");var i=e("RVkA"),h={data:function(){return{player:this.$store.state.player,maxRound:this.$store.state.maxRound,chip:this.$store.state.chip,minBet:this.$store.state.minBet,array:[],round:1,dealer:"",pot:0,bettingRound:["プリフロップ","フロップ","ターン","リバー"],br:0,players:[],allBet:0,order:"",turn:"",action:"",p:0,selectActionValue:2,selectActionOptions:{1:"ベット",2:"コール",3:"レイズ",4:"チェック",5:"フォールド",6:"オールイン"},selectWinnerValue:"",update:null,pay:10,playing:0,comment:"",winComment:"",checkCount:0,record:[],timer:null,w:0,win:9,wc:0}},watch:{update:function(){this.w++,1!=this.w&&0==this.wc?(console.log("update"),this.submit()):1==this.wc&&(console.log("winner"),this.winner())},win:function(){""==this.win&&0!=this.win||(console.log("winner"),this.winner())}},created:function(){for(var t=0;t<this.player.length;t++){var s={name:this.player[t],chip:this.chip,bet:0,isplay:0};this.players.push(s)}for(var e=this.players.length-1;e>=0;e--){var i=Math.floor(Math.random()*(e+1)),h=[this.players[i],this.players[e]];this.players[e]=h[0],this.players[i]=h[1]}var n=0;for(var a in this.players)this.order=this.order+this.players[a].name+",",++n==this.players.length&&console.log(this.order+"の順です。");console.log("ラウンド:"+this.round),console.log(this.bettingRound[0]),this.dealer=this.players[0].name,console.log("ディーラー:"+this.dealer),this.playing=this.players.length,this.sbbb()},computed:{},methods:{submit:function(){if(console.log("submit"),this.winComment="",this.pay<=this.players[this.p%this.players.length].chip)if(this.pay>=this.minBet)switch(this.action){case"ベット":this.betting();break;case"コール":this.call();break;case"レイズ":this.raise();break;case"チェック":this.check();break;case"フォールド":this.fold();break;case"オールイン":this.allIn()}else if("チェック"==this.action)switch(this.action){case"チェック":this.check()}else if("フォールド"==this.action)switch(this.action){case"フォールド":this.fold()}else if("コール"==this.action)switch(this.action){case"コール":this.call()}else this.comment="最低ベット額は"+this.minBet+"です";else if("フォールド"==this.action)switch(this.action){case"フォールド":this.fold()}else if("チェック"==this.action)switch(this.action){case"チェック":this.check()}else this.comment="所持しているチップ数を超えています"},betting:function(){console.log("ベット"),0==Math.max.apply(null,this.players.map(function(t){return t.bet}))?(this.stopTimer(),this.checkCount=0,this.players[this.p%this.players.length].bet=this.pay,this.players[this.p%this.players.length].chip=this.players[this.p%this.players.length].chip-this.players[this.p%this.players.length].bet,console.log("ベット額:"+this.players[this.p%this.players.length].bet),console.log("チップ:"+this.players[this.p%this.players.length].chip),this.nextTurn()):this.comment="既にベットされています"},call:function(){if(console.log("コール"),this.players[this.p%this.players.length].bet<Math.max.apply(null,this.players.map(function(t){return t.bet}))){this.stopTimer(),this.checkCount=0,2==Math.max.apply(null,this.players.map(function(t){return t.isplay}))&&(this.players[this.p%this.players.length].isplay=2,this.playing--),this.pay=Math.max.apply(null,this.players.map(function(t){return t.bet}));var t=Number(this.pay)-this.players[this.p%this.players.length].bet;this.players[this.p%this.players.length].bet=this.pay,this.players[this.p%this.players.length].chip=this.players[this.p%this.players.length].chip-t,console.log("ベット額:"+this.players[this.p%this.players.length].bet),console.log("チップ:"+this.players[this.p%this.players.length].chip),this.nextTurn()}else 0==Math.max.apply(null,this.players.map(function(t){return t.bet}))?(this.stopTimer(),this.checkCount=0,2==Math.max.apply(null,this.players.map(function(t){return t.isplay}))&&(this.players[this.p%this.players.length].isplay=2,this.playing--),this.players[this.p%this.players.length].bet=this.pay,this.players[this.p%this.players.length].chip=this.players[this.p%this.players.length].chip-this.players[this.p%this.players.length].bet,console.log("ベット額:"+this.players[this.p%this.players.length].bet),console.log("チップ:"+this.players[this.p%this.players.length].chip),this.nextTurn()):this.comment="コールできません"},raise:function(){if(console.log("レイズ"),this.pay>=Math.max.apply(null,this.players.map(function(t){return t.bet})))if(Number(this.pay)+Number(Math.max.apply(null,this.players.map(function(t){return t.bet})))<=this.players[this.p%this.players.length].chip){this.stopTimer(),this.checkCount=0,this.pay=Number(this.pay)+Math.max.apply(null,this.players.map(function(t){return t.bet}));var t=Number(this.pay)-this.players[this.p%this.players.length].bet;this.players[this.p%this.players.length].bet=this.pay,this.players[this.p%this.players.length].chip=this.players[this.p%this.players.length].chip-t,console.log("ベット額:"+this.players[this.p%this.players.length].bet),console.log("チップ:"+this.players[this.p%this.players.length].chip),this.nextTurn()}else this.comment="チップが足りません";else this.comment="ベットの2倍以上でレイズしてください"},check:function(){console.log("チェック");for(var t=this.round+1;0!=this.players[t%this.players.length].isplay;)t++;0==Math.max.apply(null,this.players.map(function(t){return t.bet}))?(this.stopTimer(),this.checkCount++,this.checkCount==this.playing?(this.checkCount=0,this.nextBr()):this.nextTurn()):0==this.br&&this.p%this.players.length==t%this.players.length?this.nextBr():this.comment="既にベットされています"},fold:function(){console.log("フォールド"),this.stopTimer(),this.players[this.p%this.players.length].isplay=1,console.log(this.players[this.p%this.players.length].name+":フォールド"),this.playing--,this.nextTurn()},allIn:function(){console.log("オールイン"),this.players[this.p%this.players.length].chip+this.players[this.p%this.players.length].bet>=Math.max.apply(null,this.players.map(function(t){return t.bet}))?(this.stopTimer(),this.checkCount=0,this.players[this.p%this.players.length].bet=this.players[this.p%this.players.length].bet+this.players[this.p%this.players.length].chip,this.players[this.p%this.players.length].chip=0,this.players[this.p%this.players.length].isplay=2,this.playing--,console.log("ベット額:"+this.players[this.p%this.players.length].bet),console.log("チップ:"+this.players[this.p%this.players.length].chip),this.nextTurn()):this.comment="チップが足りません"},winner:function(){""==this.win&&0!=this.win||(this.stopTimer(),this.players[this.win].chip=this.players[this.win].chip+this.pot,this.winComment=this.players[this.win].name+"さんが勝ちました",this.$modal.hide("winner-modal"),this.wc=0,this.nextRound())},nextTurn:function(){this.comment="";for(var t=0,s=0;s<this.players.length;s++)0==this.players[this.p%this.players.length].isplay&&this.players[this.p%this.players.length].bet==this.players[s].bet&&0!=this.players[s].bet&&t++;if(console.log(t+"."+this.playing+"."+this.players.length),t!=this.playing||0==Math.max.apply(null,this.players.map(function(t){return t.bet}))||0==this.br&&this.p<Number(this.players.length+this.round%this.players.length+1)){for(console.log("eBet != this.playing ||"),this.p++;0!=this.players[this.p%this.players.length].isplay&&(this.p++,this.p!=this.maxRound+this.players.length););if(1==this.playing)if(1==Math.max.apply(null,this.players.map(function(t){return t.isplay}))){for(var e=0;e<this.players.length;e++)this.allBet=Number(this.allBet)+Number(this.players[e].bet),this.players[e].bet=0;this.pot=this.pot+Number(this.allBet),this.allBet=0,this.players[this.p%this.players.length].chip=this.players[this.p%this.players.length].chip+this.pot,this.winComment=this.players[this.p%this.players.length].name+"さんが勝ちました",this.nextRound()}else this.stopTimer(),this.startTimer(),this.turn=this.players[this.p%this.players.length].name,console.log(this.turn+"の番");else if(0==this.playing){console.log("allincall");for(var i=0,h=0;h<this.players.length;h++)this.allBet=Number(this.allBet)+Number(this.players[h].bet),this.players[h].bet=0,2==this.players[h].isplay&&i++;if(1==i)for(var n=0;n<this.players.length;n++)2==this.players[n].isplay&&(this.pot=this.pot+Number(this.allBet),this.allBet=0,this.players[n].chip=this.players[n].chip+this.pot,this.winComment=this.players[n].name+"さんが勝ちました",this.nextRound());this.pot=this.pot+Number(this.allBet),this.allBet=0,this.show()}else this.stopTimer(),this.startTimer(),this.turn=this.players[this.p%this.players.length].name,console.log(this.turn+"の番")}else if(console.log("else"),0==this.playing){for(var a=0,l=0;l<this.players.length;l++)this.allBet=Number(this.allBet)+Number(this.players[l].bet),this.players[l].bet=0,2==this.players[l].isplay&&a++;if(1==a){this.pot=this.pot+Number(this.allBet),this.allBet=0;for(var r=0;r<this.players.length;r++)2==this.players[r].isplay&&(console.log("オールイン"+this.players[r].name),this.players[r].chip=this.players[r].chip+this.pot,this.winComment=this.players[r].name+"さんが勝ちました",this.nextRound())}else this.pot=this.pot+Number(this.allBet),this.allBet=0,this.show()}else this.nextBr()},nextBr:function(){for(var t=0;t<this.players.length;t++)this.allBet=Number(this.allBet)+Number(this.players[t].bet),this.players[t].bet=0;if(this.pot=this.pot+Number(this.allBet),this.allBet=0,this.br<3){for(this.br=this.br+1,console.log(this.bettingRound[this.br]),this.p=this.round%this.players.length;0!=this.players[this.p%this.players.length].isplay&&(this.p++,this.p!=this.maxRound+this.players.length););this.stopTimer(),this.startTimer(),this.turn=this.players[this.p%this.players.length].name,console.log(this.turn+"の番")}else"フォールド"!=this.action&&this.show()},nextRound:function(){if(this.round<this.maxRound){this.round+=1,this.pot=0,this.br=0,this.playing=this.players.length;for(var t=0;t<this.players.length;t++)this.players[t].chip>0?this.players[t].isplay=0:(this.players[t].isplay=1,this.playing--),1==this.playing&&(this.sort(),this.stopTimer(),this.$store.commit("navigator/push",i.a));for(this.p=(this.round-1)%this.players.length;1==this.players[this.p%this.players.length].isplay;)this.p++;this.dealer=this.players[this.p%this.players.length].name,console.log("ディーラー:"+this.dealer),console.log(this.bettingRound[0]),this.sbbb()}else this.sort(),this.stopTimer(),this.$store.commit("navigator/push",i.a)},sbbb:function(){for(this.p=this.round%this.players.length;0!=this.players[this.p%this.players.length].isplay;)this.p++;for(this.players[this.p%this.players.length].bet=this.minBet/2,this.players[this.p%this.players.length].chip=this.players[this.p%this.players.length].chip-this.players[this.p%this.players.length].bet,console.log(this.players[this.p%this.players.length].name+"の番"),console.log("ベット額:"+this.players[this.p%this.players.length].bet),console.log("チップ:"+this.players[this.p%this.players.length].chip),this.p++;0!=this.players[this.p%this.players.length].isplay;)this.p++;for(this.players[this.p%this.players.length].bet=this.minBet,this.players[this.p%this.players.length].chip=this.players[this.p%this.players.length].chip-this.players[this.p%this.players.length].bet,console.log(this.players[this.p%this.players.length].name+"の番"),console.log("ベット額:"+this.players[this.p%this.players.length].bet),console.log("チップ:"+this.players[this.p%this.players.length].chip),this.p++;0!=this.players[this.p%this.players.length].isplay;)this.p++;this.turn=this.players[this.p%this.players.length].name,console.log(this.players[this.p%this.players.length].name+"の番"),this.stopTimer(),this.startTimer()},show:function(){this.wc++,this.startTimerWinner(),this.$modal.show("winner-modal")},sort:function(){console.log(this.players),this.players.sort(function(t,s){return t.chip>s.chip?-1:t.chip<s.chip?1:0}),this.$store.state.ranking=this.players},fetch:function(t){function s(){return t.apply(this,arguments)}return s.toString=function(){return t.toString()},s}(function(){var t=this;console.log("fetch"+this.w),fetch(this.$url+"/record?recordID="+localStorage.getItem("recordID"),{method:"GET"}).then(function(t){return t.json()}).then(function(s){console.log(s),t.action=s.record.action.value,"レイズ"!=t.action&&"ベット"!=t.action||(t.pay=s.record.point.value),t.update=s.record.time.value}).catch(function(t){console.error(t)})}),startTimer:function(){var t=this;console.log("interval"),t.timer=setInterval(function(){t.fetch()},3e3)},stopTimer:function(){clearInterval(this.timer),console.log("stopped")},fetchWinner:function(){var t=this;console.log("fetchWinner"),fetch(this.$url+"/record?recordID="+localStorage.getItem("recordID"),{method:"GET"}).then(function(t){return t.json()}).then(function(s){console.log(s),""!=s.record.winner.value&&(t.win=s.record.winner.value-1,console.log(t.win))}).catch(function(t){console.error(t)})},startTimerWinner:function(){var t=this;console.log(this.wc),t.timer=setInterval(function(){t.fetchWinner()},3e3)}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-ons-page",[e("h1",{staticStyle:{color:"#ffffff"},attrs:{align:"center"}},[t._v("Smart Poker")]),t._v(" "),e("ons-card",[e("div",{staticClass:"flex_box"},[e("div",{staticClass:"text_content"},[e("div",[e("h1",[t._v("\n          ラウンド"+t._s(t.round)+"\n          "),e("br")]),t._v(" "),e("h2",[t._v("\n          "+t._s(t.bettingRound[t.br]))]),t._v(" "),e("br"),t._v(" "),e("h1",[t._v("\n          "+t._s(t.winComment)+"\n        ")]),t._v(" "),e("div",[e("h3",[t._v("ディーラーは"+t._s(t.dealer)+"です。")])]),t._v(" "),e("div",[e("h3",[t._v(t._s(t.turn)+"の番です。")])]),t._v(" "),e("br"),t._v(" "),e("div",[e("h1",[t._v("ポット:"+t._s(t.pot))])]),t._v(" "),e("div",[e("h2",[t._v("ベット:"+t._s(t.pay))])]),t._v(" "),e("div",[e("h2",[t._v(t._s(t.comment))])])])]),t._v(" "),e("div",{staticStyle:{"padding-right":"60px"}},[e("br"),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"table_content"},[e("table",{attrs:{border:"2"}},[e("tr",[e("th",[t._v("Player")]),t._v(" "),e("th",[t._v("Turn")]),t._v(" "),e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Chip")]),t._v(" "),e("th",[t._v("Bet")])]),t._v(" "),t._l(t.players,function(s,i){return e("tr",{key:s.name,class:{active:s.name==t.turn}},[e("td",[t._v("PLAYER"+t._s(i+1))]),t._v(" "),e("td",{attrs:{align:"center"}},[t.turn==s.name?e("div",[t._v("★")]):t._e(),t._v(" "),1==s.isplay?e("div",[t._v("Fold")]):t._e()]),t._v(" "),e("td",[t._v(t._s(s.name))]),t._v(" "),e("td",[t._v(t._s(s.chip))]),t._v(" "),e("td",[t._v(t._s(s.bet))])])})],2)])])]),t._v(" "),e("br"),t._v(" "),e("modal",{attrs:{name:"winner-modal"}},[e("div",{attrs:{align:"center"}},[e("h2",[t._v("ショーダウン")]),t._v("\n        ラウンド"+t._s(t.round)+"終了です。\n        勝利プレイヤーを「プレイヤー'番号'」で言ってください。\n      ")])])],1)],1)},staticRenderFns:[]};var a=e("VU/8")(h,n,!1,function(t){e("FhjP")},"data-v-55aec856",null);s.a=a.exports}},["NHnr"]);
//# sourceMappingURL=app.d71c2e4ef09712a04bff.js.map